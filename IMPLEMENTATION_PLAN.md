# 结算功能实施计划

## 阶段 1：后端余额体系
- **目标**：数据库加 balance 字段，提供余额查询 API，订单创建时扣减余额
- **测试**：curl 验证余额查询和扣减
- **状态**：完成

## 阶段 2：前端结算页面
- **目标**：新建 Checkout 页面，购物车跳转到结算，展示余额和订单预览
- **测试**：浏览器验证完整结算流程
- **状态**：完成

## 阶段 3：余额不足拦截 + 取消订单退款
- **目标**：余额不足时禁止结算并提示，取消订单自动退还余额
- **测试**：验证边界场景
- **状态**：完成
