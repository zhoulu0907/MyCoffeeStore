# MyCoffeeStore 实施计划

> 基于需求分析 (docs/prd/001-需求分析.md) 制定

---

## 项目里程碑

```
阶段一：项目初始化与设计 ──┐
阶段二：后端基础服务      ├──> 阶段三：前端页面开发 ──> 阶段四：订单系统 ──> 阶段五：优化部署
                         │
                         └──> 里程碑：MVP 可用
```

---

## 阶段一：项目初始化与设计

### 目标
完成项目结构搭建和网站原型设计

### 成功标准
- [x] PRD 需求分析文档完成
- [ ] Pencil MCP 设计原型完成
- [ ] 后端项目可正常启动
- [ ] 前端项目可正常启动
- [ ] Git 仓库初始化

### 任务列表

#### 1.1 网站原型设计 (Pencil MCP)
```bash
# 使用 Pencil MCP 设计网站
设计内容：
- 首页（轮播图、咖啡店介绍）
- 登录/注册页
- 咖啡列表页
- 咖啡详情页
- 购物车页
- 订单页
```
**验收标准**：原型设计截图保存到 `docs/design/`

#### 1.2 后端项目初始化
```bash
技术栈：Spring Boot 3.x + MyBatis-Flex + Lombok
项目结构：
my-coffee-store-backend/
├── src/main/java/com/coffee/
│   ├── CoffeeApplication.java
│   ├── config/          # 配置类
│   ├── controller/      # 控制器
│   ├── service/         # 服务层
│   ├── mapper/          # MyBatis Mapper
│   ├── entity/          # 数据库实体
│   ├── dto/             # 数据传输对象
│   ├── vo/              # 视图对象
│   └── util/            # 工具类
├── src/main/resources/
│   ├── application.yml
│   └── mapper/          # MyBatis XML
└── pom.xml
```
**验收标准**：项目可正常启动，访问 localhost:8080 返回健康状态

#### 1.3 前端项目初始化
```bash
技术栈：React 18 + Vite + TypeScript
项目结构：
my-coffee-store-frontend/
├── src/
│   ├── App.tsx
│   ├── main.tsx
│   ├── pages/           # 页面组件
│   ├── components/      # 通用组件
│   ├── services/        # API 服务
│   ├── hooks/           # 自定义 Hooks
│   ├── types/           # TypeScript 类型
│   └── utils/           # 工具函数
├── public/
├── package.json
└── vite.config.ts
```
**验收标准**：项目可正常启动，显示默认页面

#### 1.4 Git 仓库初始化
```bash
git remote add origin https://github.com/zhoulu0907/MyCoffeeStore.git
# 首次提交（不推送远程，除非明确指示）
```
**验收标准**：本地仓库初始化完成

### 测试用例
- 后端启动无报错
- 前端启动无报错
- 访问健康检查接口返回 200

### 状态：进行中

---

## 阶段二：后端基础服务

### 目标
实现用户认证和咖啡产品管理功能

### 成功标准
- [ ] 用户注册/登录 API 可用
- [ ] 咖啡产品 CRUD API 可用
- [ ] 购物车 API 可用
- [ ] 单元测试覆盖率 > 70%

### 任务列表

#### 2.1 数据库设计
```sql
-- 用户表
CREATE TABLE user (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(100),
    phone VARCHAR(20),
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- 咖啡产品表
CREATE TABLE coffee (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    price DECIMAL(10,2) NOT NULL,
    category VARCHAR(50),
    image_url VARCHAR(255),
    stock INT DEFAULT 0,
    status TINYINT DEFAULT 1 COMMENT '1:上架 0:下架',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- 订单表
CREATE TABLE `order` (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL,
    total_price DECIMAL(10,2) NOT NULL,
    status TINYINT DEFAULT 0 COMMENT '0:待支付 1:已支付 2:制作中 3:已完成 4:已取消',
    order_type TINYINT DEFAULT 0 COMMENT '0:堂食 1:外带 2:外卖',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- 订单详情表
CREATE TABLE order_item (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    order_id BIGINT NOT NULL,
    coffee_id BIGINT NOT NULL,
    quantity INT NOT NULL,
    price DECIMAL(10,2) NOT NULL
);
```

#### 2.2 API 接口定义
| 功能 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 用户注册 | POST | /api/user/register | 注册新用户 |
| 用户登录 | POST | /api/user/login | 用户登录 |
| 咖啡列表 | GET | /api/coffee/list | 获取咖啡列表 |
| 咖啡详情 | GET | /api/coffee/detail | 获取咖啡详情 |
| 添加购物车 | POST | /api/cart/add | 添加商品到购物车 |
| 购物车列表 | GET | /api/cart/list | 获取购物车 |

#### 2.3 核心代码实现
- UserService: 用户注册、登录、JWT 生成
- CoffeeService: 咖啡产品 CRUD
- CartService: 购物车操作

### 测试用例
- 注册成功/失败场景
- 登录成功/密码错误场景
- 咖啡列表分页查询
- 购物车添加/删除/清空

### 状态：未开始

---

## 阶段三：前端页面开发

### 目标
完成所有前端页面开发，对接后端 API

### 成功标准
- [ ] 首页展示正常
- [ ] 用户登录/注册功能可用
- [ ] 咖啡列表及详情页正常
- [ ] 购物车功能可用

### 任务列表

#### 3.1 页面组件开发
```
pages/
├── Home.tsx           # 首页（轮播图）
├── Login.tsx          # 登录页
├── Register.tsx       # 注册页
├── CoffeeList.tsx     # 咖啡列表
├── CoffeeDetail.tsx   # 咖啡详情
├── Cart.tsx           # 购物车
└── Order.tsx          # 订单页
```

#### 3.2 通用组件开发
```
components/
├── Carousel.tsx       # 轮播图
├── CoffeeCard.tsx     # 咖啡卡片
├── Navbar.tsx         # 导航栏
└── Footer.tsx         # 页脚
```

#### 3.3 API 服务层
```typescript
services/
├── api.ts             # Axios 封装
├── auth.ts            # 认证 API
├── coffee.ts          # 咖啡 API
└── order.ts           # 订单 API
```

### 状态：未开始

---

## 阶段四：订单系统

### 目标
实现完整的订单流程

### 成功标准
- [ ] 创建订单 API 可用
- [ ] 订单查询 API 可用
- [ ] 前端订单流程完整

### 任务列表
- 订单创建逻辑
- 订单状态流转
- 前端订单页面对接

### 状态：未开始

---

## 阶段五：优化与部署

### 目标
性能优化和生产部署

### 成功标准
- [ ] 页面加载 < 2秒
- [ ] Docker 镜像构建成功
- [ ] 生产环境部署完成

### 任务列表
- 代码重构优化
- Dockerfile 编写
- docker-compose 配置

### 状态：未开始

---

## 开发规范

### 后端规范
- 所有 API 仅使用 GET/POST 方法
- VO/DO/DTO 类必须包含 @Author 和 @Schema 注解
- 统一响应格式：`Result<T>`

### 前端规范
- 使用 React 函数式组件
- TypeScript 类型定义完整
- 使用 ESLint + Prettier

### Git 规范
- docs/ 目录不提交
- YAML 文件不提交
- 提交信息格式：`feat: xxx` / `fix: xxx`

---

*文档创建时间：2026-02-26*
