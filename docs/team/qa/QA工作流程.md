# MyCoffeeStore QA 工作流程

> 版本：1.0
> 创建时间：2026-02-26
> 适用范围：MyCoffeeStore 项目全生命周期

---

## 1. QA 角色与职责

### 1.1 QA 工程师职责

| 职责 | 说明 | 产出 |
|------|------|------|
| **代码质量审查** | 审查代码是否符合质量标准 | 审查报告 |
| **安全检查** | 验证代码安全性 | 安全检查报告 |
| **性能验证** | 验证系统性能指标 | 性能测试报告 |
| **规范监督** | 监督团队遵守开发规范 | 规范执行报告 |
| **最佳实践推广** | 推广最佳实践 | 技术分享 |

### 1.2 与其他角色的协作

```
开发人员 → 代码提交 → QA 审查 → 问题反馈 → 开发修复 → QA 验证 → 通过合并
                     ↓
                  审查报告
```

---

## 2. QA 工作流程

### 2.1 日常代码审查流程

```
┌─────────────┐
│  开发提交代码 │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│  QA 审查代码 │
└──────┬──────┘
       │
       ▼
┌─────────────────┐
│  有问题？        │
│  ┌──┐      ┌──┐ │
│  │是│      │否│ │
│  └─┬┘      └─┬┘ │
└────┼─────────┼──┘
     │         │
     ▼         ▼
┌─────────┐ ┌─────────┐
│ 反馈问题 │ │ 通过审查 │
└────┬────┘ └────┬────┘
     │          │
     │          ▼
     │    ┌─────────┐
     │    │ 可以合并 │
     │    └─────────┘
     ▼
┌─────────┐
│ 开发修复 │
└────┬────┘
     │
     ▼
┌─────────────┐
│  QA 验证修复 │
└─────────────┘
```

### 2.2 审查步骤详解

#### 步骤 1：接收审查请求

**触发条件**：
- 开发人员完成功能开发
- 开发人员提交代码审查请求
- 到达预定的审查节点

**QA 行动**：
1. 确认审查范围
2. 检查审查清单版本
3. 准备审查环境

#### 步骤 2：执行代码审查

**审查内容**：
1. **架构审查**：接口设计、数据库设计、安全性
2. **前端审查**：组件设计、状态管理、性能、TypeScript
3. **后端审查**：API 实现、数据库操作、异常处理、事务
4. **测试审查**：单元测试、集成测试
5. **代码风格**：命名规范、注释、格式
6. **文档审查**：API 文档、数据库文档、代码注释

**审查方法**：
- 使用 `代码审查清单.md` 逐项检查
- 使用静态代码分析工具
- 手动代码走查
- 运行测试验证

#### 步骤 3：记录问题

**问题记录格式**：
```markdown
### 问题编号：QAXXX-001

**严重程度**：P0 / P1 / P2 / P3
**审查人**：XXX
**审查日期**：2026-XX-XX
**相关文件**：文件路径

**问题描述**：
（详细描述发现的问题）

**影响范围**：
（说明问题影响的范围）

**改进建议**：
（提供具体的改进建议）

**优先级**：
- [ ] 立即修复（P0）
- [ ] 本轮修复（P1）
- [ ] 下轮修复（P2）
- [ ] 优化建议（P3）

**状态**：
- [ ] 待修复
- [ ] 修复中
- [ ] 待验证
- [ ] 已关闭
```

#### 步骤 4：生成审查报告

使用 `审查报告模板.md` 生成审查报告，包括：

1. **审查概况**：统计数据、问题分布
2. **问题详情**：按严重程度分类列出所有问题
3. **审查结论**：通过/有条件通过/不通过
4. **后续行动**：问题修复计划

#### 步骤 5：反馈与沟通

**沟通渠道**：
- 团队会议
- 代码审查平台（如 GitHub PR）
- 即时通讯工具

**反馈内容**：
- 审查结果概述
- 关键问题说明
- 修复建议
- 预期时间

#### 步骤 6：验证修复

**验证内容**：
- 问题已修复
- 引入新问题检查
- 测试通过
- 代码符合规范

**验证结果**：
- [ ] 通过 - 问题已修复
- [ ] 不通过 - 需要继续修复

---

## 3. 上线前审查流程

### 3.1 上线前检查清单

| 检查项 | 说明 | 负责人 | 状态 |
|--------|------|--------|------|
| **代码审查** | 所有代码已通过审查 | QA | [ ] |
| **测试通过** | 所有测试用例通过 | 测试 | [ ] |
| **安全检查** | 通过安全检查清单 | QA | [ ] |
| **性能测试** | 性能指标达标 | QA | [ ] |
| **文档完整** | 文档更新完整 | 开发 | [ ] |
| **部署准备** | 部署脚本准备就绪 | 运维 | [ ] |

### 3.2 上线前审查流程图

```
┌─────────────┐
│ 开发完成    │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│ 代码审查    │ ◄──────────┐
└──────┬──────┘             │
       │                   │
       ▼                   │
┌─────────────┐             │
│ 测试验证    │             │
└──────┬──────┘             │
       │                   │
       ▼                   │
┌─────────────┐             │
│ 安全检查    │             │
└──────┬──────┘             │
       │                   │
       ▼                   │
┌─────────────┐             │
│ 性能测试    │             │
└──────┬──────┘             │
       │                   │
       ▼                   │
┌─────────────────┐         │
│ 所有检查通过？   │         │
│  ┌──┐      ┌──┐ │         │
│  │否│      │是│ │         │
│  └─┬┘      └─┬┘ │         │
└────┼─────────┼──┘         │
     │         │            │
     ▼         ▼            │
┌─────────┐ ┌─────────┐     │
│ 反馈问题 │ │ 上线批准 │     │
└─────────┘ └─────────┘     │
                          │
     ┌────────────────────┘
     │
     ▼
┌─────────┐
│ 上线部署 │
└─────────┘
```

---

## 4. 定期巡检流程

### 4.1 巡检频率

| 巡检类型 | 频率 | 负责人 |
|----------|------|--------|
| 代码质量 | 每周 | QA |
| 安全检查 | 每月 | QA |
| 性能检查 | 每月 | QA |
| 依赖安全 | 每月 | QA |

### 4.2 巡检内容

#### 代码质量巡检

- 检查代码规范遵守情况
- 分析代码复杂度趋势
- 识别技术债务
- 评估代码可维护性

#### 安全检查巡检

- 运行安全扫描工具
- 检查依赖漏洞
- 验证安全配置
- 审查安全日志

#### 性能检查巡检

- 分析性能指标趋势
- 识别性能瓶颈
- 检查资源使用情况
- 验证优化效果

---

## 5. 问题管理流程

### 5.1 问题生命周期

```
发现 → 记录 → 分配 → 修复 → 验证 → 关闭
                    ↑              │
                    └──────┘       │
                       重新打开 ←───┘
```

### 5.2 问题优先级定义

| 优先级 | 定义 | 响应时间 | 修复时间 |
|--------|------|----------|----------|
| P0 | 严重问题，影响核心功能或存在安全漏洞 | 立即 | 4小时内 |
| P1 | 重要问题，影响用户体验 | 当天 | 2天内 |
| P2 | 一般问题，不影响核心功能 | 3天内 | 1周内 |
| P3 | 优化建议，提升代码质量 | 1周内 | 下个迭代 |

### 5.3 问题跟踪模板

```markdown
## 问题跟踪表

| 编号 | 标题 | 严重程度 | 负责人 | 状态 | 发现日期 | 目标完成日期 | 实际完成日期 |
|------|------|----------|--------|------|----------|--------------|--------------|
| QAXXX-001 | XXX | P0 | XXX | 待修复 | 2026-XX-XX | 2026-XX-XX | - |
| QAXXX-002 | XXX | P1 | XXX | 修复中 | 2026-XX-XX | 2026-XX-XX | - |
```

---

## 6. QA 工具使用

### 6.1 静态代码分析

**前端**：
```bash
# ESLint 检查
npm run lint

# TypeScript 检查
npm run type-check

# Prettier 格式检查
npm run format:check
```

**后端**：
```bash
# Checkstyle 检查
mvn checkstyle:check

# SpotBugs 检查
mvn spotbugs:check

# 依赖检查
mvn org.owasp:dependency-check-maven:check
```

### 6.2 安全扫描

**前端**：
```bash
# npm audit 检查
npm audit

# Snyk 安全扫描
npx snyk test
```

**后端**：
```bash
# OWASP 依赖检查
mvn org.owasp:dependency-check-maven:check

# SonarQube 扫描
mvn sonar:sonar
```

### 6.3 性能测试

**前端**：
```bash
# Lighthouse 性能测试
npm run lighthouse

# WebPageTest 测试
# 使用 https://www.webpagetest.org/
```

**后端**：
```bash
# Apache Bench 压力测试
ab -n 1000 -c 10 https://api.example.com/api/coffee/list

# JMeter 压力测试
# 使用 JMeter GUI 进行测试
```

---

## 7. QA 报告

### 7.1 报告类型

| 报告类型 | 频率 | 接收人 |
|----------|------|--------|
| 代码审查报告 | 每次审查后 | 开发团队 |
| 安全检查报告 | 每月 | 项目负责人 |
| 性能测试报告 | 每月/上线前 | 项目负责人 |
| QA 月报 | 每月 | 项目负责人 |

### 7.2 报告内容

**代码审查报告**：
- 审查概况
- 问题详情
- 审查结论
- 后续行动

**安全检查报告**：
- 安全检查结果
- 漏洞详情
- 修复建议
- 安全趋势

**性能测试报告**：
- 性能指标
- 瓶颈分析
- 优化建议
- 性能趋势

**QA 月报**：
- 月度工作总结
- 问题统计
- 质量趋势
- 下月计划

---

## 8. QA 最佳实践

### 8.1 审查原则

1. **基于事实**：用数据和证据说话
2. **建设性反馈**：提供具体的改进建议
3. **及时性**：尽快完成审查，不阻塞开发
4. **一致性**：统一使用检查清单和标准
5. **持续改进**：定期回顾和改进 QA 流程

### 8.2 沟通技巧

1. **先肯定后建议**：肯定优点，提出改进建议
2. **解释原因**：说明为什么这样要求
3. **提供示例**：提供正确的代码示例
4. **关注问题而非人**：针对代码问题，而非个人
5. **寻求共识**：与开发团队达成共识

### 8.3 效率提升

1. **自动化工具**：使用自动化工具提高效率
2. **批量审查**：合理安排批量审查
3. **优先级管理**：优先审查重要模块
4. **知识积累**：建立问题知识库
5. **模板复用**：使用标准模板

---

## 9. QA 考核指标

### 9.1 质量指标

| 指标 | 目标 | 说明 |
|------|------|------|
| 代码审查覆盖率 | 100% | 所有代码都经过审查 |
| 问题发现率 | > 90% | 上线前发现问题比例 |
| 安全漏洞数 | 0 | 上线后严重安全漏洞 |
| 性能达标率 | 100% | 性能指标达标 |

### 9.2 效率指标

| 指标 | 目标 | 说明 |
|------|------|------|
| 审查响应时间 | < 4小时 | 收到请求后的响应时间 |
| 审查完成时间 | < 24小时 | 完成审查的时间 |
| 问题修复验证时间 | < 4小时 | 验证问题修复的时间 |

---

## 10. 附录

### 10.1 QA 文档索引

| 文档 | 路径 | 说明 |
|------|------|------|
| 代码质量标准 | `docs/team/qa/代码质量标准.md` | 前后端代码质量标准 |
| 代码审查清单 | `docs/team/qa/代码审查清单.md` | 代码审查检查清单 |
| 安全检查清单 | `docs/team/qa/安全检查清单.md` | 安全检查检查清单 |
| 性能检查清单 | `docs/team/qa/性能检查清单.md` | 性能检查检查清单 |
| 审查报告模板 | `docs/team/qa/审查报告模板.md` | 审查报告模板 |

### 10.2 工具参考

| 工具 | 用途 | 链接 |
|------|------|------|
| ESLint | 前端代码检查 | https://eslint.org/ |
| Checkstyle | Java 代码检查 | https://checkstyle.sourceforge.io/ |
| OWASP Dependency-Check | 依赖安全检查 | https://owasp.org/www-project-dependency-check/ |
| Lighthouse | 前端性能测试 | https://developers.google.com/web/tools/lighthouse |
| SonarQube | 代码质量分析 | https://www.sonarqube.org/ |

---

*文档版本：1.0*
*最后更新：2026-02-26*
