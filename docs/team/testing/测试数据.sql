-- =====================================================
-- MyCoffeeStore 测试数据脚本
-- 创建时间: 2026-02-26
-- 用途: 为测试环境准备测试数据
-- =====================================================

-- 清理现有测试数据
SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE TABLE order_item;
TRUNCATE TABLE `order`;
TRUNCATE TABLE cart;
TRUNCATE TABLE coffee;
TRUNCATE TABLE `user`;
SET FOREIGN_KEY_CHECKS = 1;

-- =====================================================
-- 1. 测试用户数据
-- =====================================================

INSERT INTO `user` (id, username, password, email, phone, create_time) VALUES
-- 普通测试用户 (密码: Test@123)
(1, 'testuser', '$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy', 'test@example.com', '13800138001', NOW()),
-- VIP 用户
(2, 'vipuser', '$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy', 'vip@example.com', '13800138002', NOW()),
-- 测试用户 3
(3, 'user3', '$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy', 'user3@example.com', '13800138003', NOW()),
-- 测试用户 4
(4, 'user4', '$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy', 'user4@example.com', '13800138004', NOW()),
-- 测试用户 5
(5, 'user5', '$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy', 'user5@example.com', '13800138005', NOW()),
-- 测试用户 6
(6, 'user6', '$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy', 'user6@example.com', '13800138006', NOW()),
-- 测试用户 7
(7, 'user7', '$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy', 'user7@example.com', '13800138007', NOW()),
-- 测试用户 8
(8, 'user8', '$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy', 'user8@example.com', '13800138008', NOW()),
-- 测试用户 9
(9, 'user9', '$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy', 'user9@example.com', '13800138009', NOW()),
-- 测试用户 10
(10, 'user10', '$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy', 'user10@example.com', '13800138010', NOW());

-- =====================================================
-- 2. 测试咖啡产品数据
-- =====================================================

INSERT INTO coffee (id, name, description, price, category, image_url, stock, status, create_time) VALUES
-- 拿铁系列
(1, '经典拿铁', '丝滑奶泡与浓缩咖啡的完美融合，带来浓郁香醇的口感体验。选用阿拉比卡咖啡豆，精心烘焙，现场制作。', 5.50, '拿铁', '/images/latte.jpg', 100, 1, NOW()),
(2, '香草拿铁', '经典拿铁添加天然香草糖浆，香甜而不腻，带来温暖舒适的味觉享受。', 6.00, '拿铁', '/images/vanilla-latte.jpg', 80, 1, NOW()),
(3, '焦糖拿铁', '浓郁焦糖与丝滑拿铁的结合，顶部装饰焦糖酱，甜蜜诱人。', 6.00, '拿铁', '/images/caramel-latte.jpg', 75, 1, NOW()),
(4, '冰拿铁', '清凉冰爽的经典拿铁，夏日首选。冰块与浓缩咖啡、牛奶的完美比例。', 5.50, '拿铁', '/images/iced-latte.jpg', 90, 1, NOW()),

-- 卡布奇诺系列
(5, '经典卡布奇诺', '意式传统咖啡，浓缩咖啡与热牛奶、奶泡的三层经典搭配，咖啡香浓。', 5.00, '卡布奇诺', '/images/cappuccino.jpg', 85, 1, NOW()),
(6, '焦糖玛奇朵', '香浓奶泡与浓缩咖啡，加入香草糖浆，顶部淋有焦糖酱，层次丰富。', 5.50, '卡布奇诺', '/images/macchiato.jpg', 70, 1, NOW()),

-- 浓缩咖啡系列
(7, '意式浓缩', '纯正意式浓缩，咖啡精华所在。浓郁醇厚，余味悠长。', 3.50, '浓缩', '/images/espresso.jpg', 150, 1, NOW()),
(8, '美式咖啡', '浓缩咖啡加热水，简单纯粹的咖啡享受。清爽不腻，适合任何时候。', 3.00, '浓缩', '/images/americano.jpg', 120, 1, NOW()),
(9, '双重浓缩', '双份浓缩咖啡，加倍浓郁，适合追求强烈咖啡体验的人士。', 4.50, '浓缩', '/images/double-espresso.jpg', 100, 1, NOW()),
(10, '冰美式', '冰爽美式咖啡，夏日解暑首选。干净利落的咖啡风味。', 3.50, '浓缩', '/images/iced-americano.jpg', 110, 1, NOW()),

-- 冷萃系列
(11, '冷萃咖啡', '12小时低温慢萃，口感顺滑，酸度低，咖啡香气独特。', 4.50, '冷萃', '/images/cold-brew.jpg', 60, 1, NOW()),
(12, '氮气冷萃', '冷萃咖啡注入氮气，口感如奶昔般丝滑，泡沫绵密。', 5.50, '冷萃', '/images/nitro-cold-brew.jpg', 40, 1, NOW()),

-- 摩卡系列
(13, '经典摩卡', '浓缩咖啡与高品质可可粉的完美结合，加入丝滑牛奶，顶部装饰鲜奶油。', 6.00, '摩卡', '/images/mocha.jpg', 65, 1, NOW()),
(14, '白摩卡', '采用白巧克力替代传统可可，口味香甜独特，奶香浓郁。', 6.50, '摩卡', '/images/white-mocha.jpg', 50, 1, NOW()),
(15, '薄荷摩卡', '摩卡加入薄荷糖浆，清新与浓郁完美平衡，带来独特味觉体验。', 6.50, '摩卡', '/images/peppermint-mocha.jpg', 45, 1, NOW()),

-- 特色饮品
(16, '阿法奇朵', '意式浓缩浇在香草冰淇淋上，冷热交替，甜蜜与苦涩的完美融合。', 5.50, '特色', '/images/affogato.jpg', 55, 1, NOW()),
(17, '爱尔兰咖啡', '浓缩咖啡加入爱尔兰威士忌，顶部覆盖鲜奶油，经典温暖。', 7.00, '特色', '/images/irish-coffee.jpg', 30, 1, NOW()),
(18, '维也纳咖啡', '浓缩咖啡加入大量鲜奶油，咖啡与奶油的和谐共舞。', 6.00, '特色', '/images/vienna-coffee.jpg', 40, 1, NOW()),
(19, '柠檬咖啡', '美式咖啡加入新鲜柠檬汁，清爽提神，夏日绝佳选择。', 4.50, '特色', '/images/lemon-coffee.jpg', 50, 1, NOW()),
(20, '椰乳拿铁', '经典拿铁使用椰乳替代牛奶，热带风情与咖啡的奇妙结合。', 6.50, '特色', '/images/coconut-latte.jpg', 35, 1, NOW());

-- =====================================================
-- 3. 测试购物车数据
-- =====================================================

INSERT INTO cart (id, user_id, coffee_id, quantity, price, create_time) VALUES
-- 用户 1 的购物车
(1, 1, 1, 2, 5.50, NOW()),
(2, 1, 5, 1, 5.00, NOW()),
(3, 1, 13, 1, 6.00, NOW()),

-- 用户 2 的购物车
(4, 2, 2, 1, 6.00, NOW()),
(5, 2, 7, 2, 3.50, NOW()),

-- 用户 3 的购物车
(6, 3, 3, 1, 6.00, NOW()),
(7, 3, 11, 3, 4.50, NOW()),
(8, 3, 16, 1, 5.50, NOW()),

-- 用户 4 的购物车
(9, 4, 4, 2, 5.50, NOW()),
(10, 4, 8, 1, 3.00, NOW()),

-- 用户 5 的购物车
(11, 5, 1, 1, 5.50, NOW()),
(12, 5, 6, 2, 5.50, NOW()),
(13, 5, 14, 1, 6.50, NOW()),

-- 用户 6 的购物车（空购物车，用于测试空购物车场景）
-- 无数据

-- 用户 7 的购物车
(14, 7, 9, 1, 4.50, NOW()),
(15, 7, 12, 1, 5.50, NOW()),

-- 用户 8 的购物车
(16, 8, 10, 3, 3.50, NOW()),
(17, 8, 15, 1, 6.50, NOW()),

-- 用户 9 的购物车
(18, 9, 17, 1, 7.00, NOW()),
(19, 9, 20, 2, 6.50, NOW()),

-- 用户 10 的购物车
(20, 10, 18, 1, 6.00, NOW()),
(21, 10, 19, 1, 4.50, NOW());

-- =====================================================
-- 4. 测试订单数据
-- =====================================================

INSERT INTO `order` (id, user_id, total_price, status, order_type, address, create_time) VALUES
-- 用户 1 的订单
(1, 1, 16.00, 3, 0, NULL, '2026-02-26 10:00:00'),  -- 已完成 - 堂食
(2, 1, 11.50, 2, 1, NULL, '2026-02-26 11:30:00'),  -- 制作中 - 外带
(3, 1, 24.00, 1, 2, '123 Haight St, San Francisco, CA 94117', '2026-02-26 14:20:00'),  -- 已支付 - 外卖
(4, 1, 6.00, 0, 0, NULL, '2026-02-26 15:45:00'),   -- 待支付 - 堂食

-- 用户 2 的订单
(5, 2, 13.00, 3, 0, NULL, '2026-02-26 09:15:00'),  -- 已完成
(6, 2, 18.00, 2, 2, '456 Ashbury Ave, San Francisco, CA 94117', '2026-02-26 12:00:00'),  -- 制作中

-- 用户 3 的订单
(7, 3, 19.50, 3, 1, NULL, '2026-02-26 08:30:00'),  -- 已完成
(8, 3, 5.50, 3, 0, NULL, '2026-02-26 10:45:00'),   -- 已完成
(9, 3, 27.00, 1, 2, '789 Stanyan St, San Francisco, CA 94117', '2026-02-26 13:15:00'),  -- 已支付

-- 用户 4 的订单
(10, 4, 14.00, 4, 0, NULL, '2026-02-26 11:00:00'),  -- 已取消

-- 用户 5 的订单
(11, 5, 18.50, 3, 1, NULL, '2026-02-26 09:00:00'),  -- 已完成
(12, 5, 12.00, 2, 0, NULL, '2026-02-26 14:30:00'),  -- 制作中

-- 用户 6 的订单
(13, 6, 5.50, 3, 0, NULL, '2026-02-26 10:00:00'),  -- 已完成

-- 用户 7 的订单
(14, 7, 10.00, 3, 1, NULL, '2026-02-26 11:20:00'),  -- 已完成
(15, 7, 7.00, 1, 2, '321 Frederick St, San Francisco, CA 94117', '2026-02-26 15:00:00'),  -- 已支付

-- 用户 8 的订单
(16, 8, 17.00, 2, 0, NULL, '2026-02-26 12:45:00'),  -- 制作中

-- 用户 9 的订单
(17, 9, 20.00, 3, 1, NULL, '2026-02-26 08:00:00'),  -- 已完成
(18, 9, 13.00, 0, 0, NULL, '2026-02-26 16:00:00'),  -- 待支付

-- 用户 10 的订单
(19, 10, 10.50, 3, 2, '654 Waller St, San Francisco, CA 94117', '2026-02-26 09:30:00'),  -- 已完成
(20, 10, 7.00, 2, 0, NULL, '2026-02-26 13:45:00'),  -- 制作中
(21, 10, 5.50, 4, 1, NULL, '2026-02-26 14:00:00'),  -- 已取消

-- 更多订单用于分页测试
(22, 1, 11.00, 3, 0, NULL, '2026-02-25 10:00:00'),
(23, 1, 17.50, 3, 1, NULL, '2026-02-25 11:00:00'),
(24, 2, 6.50, 3, 0, NULL, '2026-02-25 09:00:00'),
(25, 3, 19.00, 3, 2, '999 Haight St, San Francisco, CA 94117', '2026-02-25 14:00:00'),
(26, 4, 12.00, 3, 1, NULL, '2026-02-25 10:30:00'),
(27, 5, 15.50, 3, 0, NULL, '2026-02-25 11:30:00'),
(28, 6, 8.00, 3, 2, '111 Ashbury Ave, San Francisco, CA 94117', '2026-02-25 12:00:00'),
(29, 7, 21.00, 3, 1, NULL, '2026-02-25 09:30:00'),
(30, 8, 9.50, 3, 0, NULL, '2026-02-25 13:00:00'),
(31, 9, 14.50, 3, 2, '222 Stanyan St, San Francisco, CA 94117', '2026-02-25 15:00:00'),
(32, 10, 18.00, 3, 1, NULL, '2026-02-25 10:15:00'),
(33, 1, 22.00, 3, 0, NULL, '2026-02-24 09:00:00'),
(34, 2, 16.50, 3, 1, NULL, '2026-02-24 11:00:00'),
(35, 3, 7.50, 3, 2, '333 Frederick St, San Francisco, CA 94117', '2026-02-24 14:00:00'),
(36, 4, 13.00, 3, 0, NULL, '2026-02-24 10:00:00'),
(37, 5, 25.00, 3, 1, NULL, '2026-02-24 12:00:00'),
(38, 6, 5.50, 3, 2, '444 Waller St, San Francisco, CA 94117', '2026-02-24 13:30:00'),
(39, 7, 11.00, 3, 0, NULL, '2026-02-24 09:30:00'),
(40, 8, 19.50, 3, 1, NULL, '2026-02-24 11:30:00'),
(41, 9, 8.50, 3, 2, '555 Haight St, San Francisco, CA 94117', '2026-02-24 15:00:00'),
(42, 10, 23.00, 3, 0, NULL, '2026-02-24 10:00:00'),
(43, 1, 12.50, 3, 1, NULL, '2026-02-23 09:00:00'),
(44, 2, 17.00, 3, 0, NULL, '2026-02-23 11:00:00'),
(45, 3, 6.00, 3, 2, '666 Ashbury Ave, San Francisco, CA 94117', '2026-02-23 14:00:00'),
(46, 4, 20.50, 3, 1, NULL, '2026-02-23 10:00:00'),
(47, 5, 9.00, 3, 0, NULL, '2026-02-23 12:00:00'),
(48, 6, 15.00, 3, 2, '777 Stanyan St, San Francisco, CA 94117', '2026-02-23 13:00:00'),
(49, 7, 18.50, 3, 1, NULL, '2026-02-23 09:30:00'),
(50, 8, 7.00, 3, 0, NULL, '2026-02-23 11:30:00');

-- =====================================================
-- 5. 测试订单详情数据
-- =====================================================

INSERT INTO order_item (id, order_id, coffee_id, quantity, price) VALUES
-- 订单 1 的详情
(1, 1, 1, 2, 5.50),   -- 2 份经典拿铁
(2, 1, 5, 1, 5.00),   -- 1 份卡布奇诺

-- 订单 2 的详情
(3, 2, 2, 1, 6.00),   -- 1 份香草拿铁
(4, 2, 7, 1, 3.50),   -- 1 份意式浓缩

-- 订单 3 的详情
(5, 3, 3, 1, 6.00),   -- 1 份焦糖拿铁
(6, 3, 11, 3, 4.50),  -- 3 份冷萃咖啡

-- 订单 4 的详情
(7, 4, 13, 1, 6.00),  -- 1 份摩卡

-- 订单 5 的详情
(8, 5, 1, 1, 5.50),   -- 1 份经典拿铁
(9, 5, 7, 2, 3.50),   -- 2 份意式浓缩

-- 订单 6 的详情
(10, 6, 13, 1, 6.00), -- 1 份摩卡
(11, 6, 14, 1, 6.50), -- 1 份白摩卡

-- 订单 7 的详情
(12, 7, 3, 1, 6.00),  -- 1 份焦糖拿铁
(13, 7, 11, 3, 4.50), -- 3 份冷萃咖啡

-- 订单 8 的详情
(14, 8, 16, 1, 5.50), -- 1 份阿法奇朵

-- 订单 9 的详情
(15, 9, 5, 3, 5.00),  -- 3 份卡布奇诺
(16, 9, 17, 1, 7.00), -- 1 份爱尔兰咖啡

-- 订单 10 的详情
(17, 10, 4, 2, 5.50), -- 2 份冰拿铁
(18, 10, 8, 1, 3.00), -- 1 份美式咖啡

-- 订单 11 的详情
(19, 11, 1, 1, 5.50), -- 1 份经典拿铁
(20, 11, 6, 2, 5.50), -- 2 份焦糖玛奇朵

-- 订单 12 的详情
(21, 12, 2, 2, 6.00), -- 2 份香草拿铁

-- 订单 13 的详情
(22, 13, 1, 1, 5.50), -- 1 份经典拿铁

-- 订单 14 的详情
(23, 14, 9, 2, 4.50), -- 2 份双重浓缩

-- 订单 15 的详情
(24, 15, 15, 1, 6.50), -- 1 份薄荷摩卡

-- 订单 16 的详情
(25, 16, 10, 3, 3.50), -- 3 份冰美式
(26, 16, 15, 1, 6.50), -- 1 份薄荷摩卡

-- 订单 17 的详情
(27, 17, 17, 1, 7.00), -- 1 份爱尔兰咖啡
(28, 17, 20, 2, 6.50), -- 2 份椰乳拿铁

-- 订单 18 的详情
(29, 18, 18, 2, 6.00), -- 2 份维也纳咖啡

-- 订单 19 的详情
(30, 19, 1, 1, 5.50), -- 1 份经典拿铁
(31, 19, 19, 1, 4.50), -- 1 份柠檬咖啡

-- 订单 20 的详情
(32, 20, 18, 1, 6.00), -- 1 份维也纳咖啡
(33, 20, 7, 1, 3.50), -- 1 份意式浓缩

-- 其余订单的详情（用于分页测试）
(34, 21, 1, 1, 5.50),
(35, 22, 2, 2, 6.00),
(36, 23, 5, 1, 5.00),
(37, 23, 11, 2, 4.50),
(38, 24, 7, 1, 3.50),
(39, 24, 8, 1, 3.00),
(40, 25, 3, 1, 6.00),
(41, 25, 13, 1, 6.00),
(42, 25, 14, 1, 6.50),
(43, 26, 4, 2, 5.50),
(44, 27, 1, 1, 5.50),
(45, 27, 6, 2, 5.50),
(46, 28, 16, 1, 5.50),
(47, 29, 2, 1, 6.00),
(48, 29, 9, 2, 4.50),
(49, 30, 10, 1, 3.50),
(50, 30, 12, 1, 5.50),
(51, 31, 17, 1, 7.00),
(52, 31, 19, 1, 4.50),
(53, 32, 1, 2, 5.50),
(54, 32, 3, 2, 6.00),
(55, 33, 5, 3, 5.00),
(56, 33, 11, 1, 4.50),
(57, 34, 13, 1, 6.00),
(58, 34, 14, 1, 6.50),
(59, 34, 15, 1, 6.50),
(60, 35, 1, 1, 5.50),
(61, 35, 20, 1, 6.50),
(62, 36, 2, 2, 6.00),
(63, 37, 16, 2, 5.50),
(64, 37, 17, 1, 7.00),
(65, 38, 1, 1, 5.50),
(66, 39, 5, 1, 5.00),
(67, 39, 7, 1, 3.50),
(68, 40, 11, 3, 4.50),
(69, 40, 12, 1, 5.50),
(70, 41, 18, 1, 6.00),
(71, 41, 19, 1, 4.50),
(72, 42, 1, 2, 5.50),
(73, 42, 2, 2, 6.00),
(74, 43, 3, 1, 6.00),
(75, 43, 4, 1, 5.50),
(76, 44, 5, 1, 5.00),
(77, 44, 6, 2, 5.50),
(78, 45, 13, 1, 6.00),
(79, 46, 14, 1, 6.50),
(80, 46, 15, 2, 6.50),
(81, 47, 1, 1, 5.50),
(82, 47, 7, 1, 3.50),
(83, 48, 16, 2, 5.50),
(84, 48, 17, 1, 7.00),
(85, 49, 18, 1, 6.00),
(86, 49, 19, 2, 4.50),
(87, 50, 1, 1, 5.50),
(88, 50, 2, 1, 6.00);

-- =====================================================
-- 6. 添加下架/无库存产品（用于测试异常场景）
-- =====================================================

-- 下架产品
INSERT INTO coffee (id, name, description, price, category, image_url, stock, status, create_time) VALUES
(21, '季节限定-樱花拿铁', '春季限定产品，已下架。', 7.00, '拿铁', '/images/sakura-latte.jpg', 0, 0, NOW()),
(22, '售罄-特调咖啡', '暂时售罄的特调咖啡。', 8.00, '特色', '/images/special-coffee.jpg', 0, 1, NOW());

-- =====================================================
-- 数据统计
-- =====================================================

-- 用户数量: 10
-- 咖啡产品数量: 22 (20个上架 + 2个下架/售罄)
-- 购物车条目: 21
-- 订单数量: 50
-- 订单详情条目: 88

-- =====================================================
-- 验证查询
-- =====================================================

-- 查看用户数量
-- SELECT COUNT(*) as user_count FROM `user`;

-- 查看产品数量（按状态）
-- SELECT status, COUNT(*) as count FROM coffee GROUP BY status;

-- 查看订单数量（按状态）
-- SELECT status, COUNT(*) as count FROM `order` GROUP BY status;

-- 查看各用户的购物车商品数量
-- SELECT user_id, COUNT(*) as item_count FROM cart GROUP BY user_id;

-- =====================================================
-- 索引建议（可选）
-- =====================================================

-- CREATE INDEX idx_user_email ON `user`(email);
-- CREATE INDEX idx_coffee_category_status ON coffee(category, status);
-- CREATE INDEX idx_cart_user_id ON cart(user_id);
-- CREATE INDEX idx_order_user_id ON `order`(user_id);
-- CREATE INDEX idx_order_create_time ON `order`(create_time);
-- CREATE INDEX idx_order_item_order_id ON order_item(order_id);

-- =====================================================
-- 数据准备完成
-- =====================================================
